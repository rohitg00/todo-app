"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ComponentUrl = void 0;
const query_string_1 = __importDefault(require("query-string"));
const base_ui_utils_string_affix_1 = require("@teambit/base-ui.utils.string.affix");
const constants_1 = require("./constants");
/** stringifies a component id to a url */
exports.ComponentUrl = {
    toUrl,
    toPathname,
    toQuery,
};
function toUrl(id, options = {}) {
    const query = query_string_1.default.stringify(toQuery(id, options));
    const { useLocationOrigin } = options;
    const domain = useLocationOrigin ? window.location.origin : constants_1.baseUrl;
    return `${domain}/${toPathname(id)}${(0, base_ui_utils_string_affix_1.affix)('?', query)}`;
}
function toPathname(id) {
    return id.toString({ ignoreVersion: true }).replace('.', '/');
}
const semverRegex = /[\^~]/;
function toQuery(id, { includeVersion = true } = {}) {
    var _a;
    const version = includeVersion && id.version !== 'latest' ? (_a = id.version) === null || _a === void 0 ? void 0 : _a.replace(semverRegex, '') : undefined;
    return {
        version,
    };
}
//# sourceMappingURL=component-url.js.map